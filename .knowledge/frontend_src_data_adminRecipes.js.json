{"is_source_file": true, "format": "JavaScript", "description": "This file manages admin-level operations and public interfaces for recipe data within a frontend application. It includes functions for normalizing recipe objects, retrieving, approving, rejecting, upserting, deleting recipes, and computing analytics metrics related to recipes. It interacts with local storage and other modules for handling favorites and reviews.", "external_files": ["./recipes", "./favorites", "./reviews"], "external_methods": ["getLocalRecipes", "setLocalRecipes", "upsertLocalRecipe", "deleteLocalRecipe", "getFavoriteIds", "setFavoriteIds", "purgeReviewsForRecipe", "computeRatingsAnalytics"], "published": ["normalizeAdminFields", "getAllStoredRecipes", "getApprovedRecipes", "getPendingRecipes", "approveRecipe", "rejectRecipe", "adminUpsert", "hardDeleteRecipe", "computeAnalytics", "RECIPE_STATUS", "RECIPE_SOURCE"], "classes": [], "methods": [{"name": "normalizeAdminFields(recipe, { defaultStatus = RECIPE_STATUS.PENDING, source = RECIPE_SOURCE.USER, submittedBy = 'user' } = {})", "description": "Normalizes a recipe object by ensuring admin-required fields like source, status, submittedBy, createdAt, and updatedAt are set, defaulting where necessary.", "scope": "", "scopeKind": ""}, {"name": "getAllStoredRecipes()", "description": "Retrieves all locally stored recipes, which serve as the authoritative source for mutations.", "scope": "", "scopeKind": ""}, {"name": "getApprovedRecipes(recipesArray)", "description": "Filters and returns recipes with status 'approved'.", "scope": "", "scopeKind": ""}, {"name": "getPendingRecipes(recipesArray)", "description": "Filters and returns recipes with status 'pending' for approval.", "scope": "", "scopeKind": ""}, {"name": "approveRecipe(id)", "description": "Sets the status of a recipe identified by id to 'approved' and updates its timestamp.", "scope": "", "scopeKind": ""}, {"name": "rejectRecipe(id)", "description": "Deletes a recipe by id, cleans up associated favorites and reviews.", "scope": "", "scopeKind": ""}, {"name": "adminUpsert(recipeDraft)", "description": "Inserts or updates a recipe record, setting default values for createdAt, source, and status.", "scope": "", "scopeKind": ""}, {"name": "hardDeleteRecipe(id)", "description": "Deletes a recipe by id and cleans up associated favorites and reviews.", "scope": "", "scopeKind": ""}, {"name": "computeAnalytics(recipesArray)", "description": "Calculates various metrics and statistics about recipes such as counts, categories, favorite counts, recent additions, difficulty, cooking time, and ratings.", "scope": "", "scopeKind": ""}], "calls": ["getLocalRecipes", "setLocalRecipes", "upsertLocalRecipe", "deleteLocalRecipe", "getFavoriteIds", "setFavoriteIds", "purgeReviewsForRecipe", "computeRatingsAnalytics"], "search-terms": ["admin recipe normalization", "recipe approval", "local storage recipes", "recipe analytics", "favorites cleanup", "reviews cleanup"], "state": 2, "file_id": 25, "knowledge_revision": 118, "git_revision": "4c3b3369fda8cc69e616a9a60540fcd3129911a8", "revision_history": [{"101": "fb9208cc71fde28bfe44d4f41c102d6db578c854"}, {"113": "4c3b3369fda8cc69e616a9a60540fcd3129911a8"}, {"118": "4c3b3369fda8cc69e616a9a60540fcd3129911a8"}], "ctags": [{"_type": "tag", "name": "1", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings.ratingDistribution", "scopeKind": "class"}, {"_type": "tag", "name": "2", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings.ratingDistribution", "scopeKind": "class"}, {"_type": "tag", "name": "3", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings.ratingDistribution", "scopeKind": "class"}, {"_type": "tag", "name": "4", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings.ratingDistribution", "scopeKind": "class"}, {"_type": "tag", "name": "5", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings.ratingDistribution", "scopeKind": "class"}, {"_type": "tag", "name": "APPROVED", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  APPROVED: 'approved',$/", "language": "JavaScript", "kind": "property", "scope": "RECIPE_STATUS", "scopeKind": "class"}, {"_type": "tag", "name": "MOCK", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  MOCK: 'mock',$/", "language": "JavaScript", "kind": "property", "scope": "RECIPE_SOURCE", "scopeKind": "class"}, {"_type": "tag", "name": "PENDING", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  PENDING: 'pending',$/", "language": "JavaScript", "kind": "property", "scope": "RECIPE_STATUS", "scopeKind": "class"}, {"_type": "tag", "name": "RECIPE_SOURCE", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export const RECIPE_SOURCE = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "RECIPE_STATUS", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export const RECIPE_STATUS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "REJECTED", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  REJECTED: 'rejected',$/", "language": "JavaScript", "kind": "property", "scope": "RECIPE_STATUS", "scopeKind": "class"}, {"_type": "tag", "name": "USER", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  USER: 'user',$/", "language": "JavaScript", "kind": "property", "scope": "RECIPE_SOURCE", "scopeKind": "class"}, {"_type": "tag", "name": "adminUpsert", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function adminUpsert(recipeDraft) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeDraft)"}, {"_type": "tag", "name": "approveRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function approveRecipe(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "averageRatingAcrossApproved", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings", "scopeKind": "class"}, {"_type": "tag", "name": "computeAnalytics", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function computeAnalytics(recipesArray) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipesArray)"}, {"_type": "tag", "name": "getAllStoredRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function getAllStoredRecipes() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getApprovedRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function getApprovedRecipes(recipesArray) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipesArray)"}, {"_type": "tag", "name": "getPendingRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function getPendingRecipes(recipesArray) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipesArray)"}, {"_type": "tag", "name": "hardDeleteRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function hardDeleteRecipe(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "normalizeAdminFields", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function normalizeAdminFields(recipe, { defaultStatus = RECIPE_STATUS.PENDING, source = R/", "language": "JavaScript", "kind": "function", "signature": "(recipe, { defaultStatus = RECIPE_STATUS.PENDING, source = RECIPE_SOURCE.USER, submittedBy = 'user' } = {})"}, {"_type": "tag", "name": "perRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "property", "scope": "computeAnalytics.ratings", "scopeKind": "class"}, {"_type": "tag", "name": "ratingDistribution", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "class", "scope": "computeAnalytics.ratings", "scopeKind": "class"}, {"_type": "tag", "name": "ratings", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^  let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "language": "JavaScript", "kind": "class", "scope": "computeAnalytics", "scopeKind": "class"}, {"_type": "tag", "name": "rejectRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/adminRecipes.js", "pattern": "/^export function rejectRecipe(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}], "hash": "4de2b226b91a3314c4944fafb89dac3f", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/data/adminRecipes.js", "fields": [{"name": "let ratings = { perRecipe: new Map(), averageRatingAcrossApproved: 0, ratingDistribution: { 1:/", "scope": "computeAnalytics.ratings.ratingDistribution", "scopeKind": "class", "description": "unavailable"}, {"name": "APPROVED: 'approved',", "scope": "RECIPE_STATUS", "scopeKind": "class", "description": "unavailable"}, {"name": "MOCK: 'mock',", "scope": "RECIPE_SOURCE", "scopeKind": "class", "description": "unavailable"}, {"name": "PENDING: 'pending',", "scope": "RECIPE_STATUS", "scopeKind": "class", "description": "unavailable"}, {"name": "REJECTED: 'rejected',", "scope": "RECIPE_STATUS", "scopeKind": "class", "description": "unavailable"}, {"name": "USER: 'user',", "scope": "RECIPE_SOURCE", "scopeKind": "class", "description": "unavailable"}]}