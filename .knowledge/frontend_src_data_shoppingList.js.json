{"is_source_file": true, "format": "JavaScript", "description": "This file defines a data model and helper functions for managing a shopping list within a JavaScript frontend application, including CRUD operations, ingredient parsing and normalization, and integration with local storage.", "external_files": ["./storage"], "external_methods": ["readStorage", "writeStorage"], "published": ["getShoppingList", "setShoppingList", "addShoppingItem", "updateShoppingItem", "removeShoppingItem", "togglePurchased", "clearPurchased", "normalizeIngredientName", "parseIngredients", "mergeIngredients", "addRecipeIngredientsToShoppingList"], "classes": [], "methods": [{"name": "getShoppingList()", "description": "Returns the full shopping list array from localStorage.", "scope": "", "scopeKind": ""}, {"name": "setShoppingList(items)", "description": "Overwrites shopping list in localStorage with provided array.", "scope": "", "scopeKind": ""}, {"name": "addShoppingItem({ name, quantity = '', unit = '', recipeId = null })", "description": "Adds a single shopping item and persists. Returns created item.", "scope": "", "scopeKind": ""}, {"name": "updateShoppingItem(id, patch)", "description": "Updates fields for item with specified id.", "scope": "", "scopeKind": ""}, {"name": "removeShoppingItem(id)", "description": "Removes item by id from the shopping list.", "scope": "", "scopeKind": ""}, {"name": "togglePurchased(id)", "description": "Toggles the 'purchased' flag for an item by id.", "scope": "", "scopeKind": ""}, {"name": "clearPurchased()", "description": "Removes all purchased items from the shopping list.", "scope": "", "scopeKind": ""}, {"name": "normalizeIngredientName(str)", "description": "Normalizes ingredient name to key and display formats.", "scope": "", "scopeKind": ""}, {"name": "parseIngredients(raw)", "description": "Parses raw input into an array of ingredient objects with name, quantity, and unit.", "scope": "", "scopeKind": ""}, {"name": "mergeIngredients(ings)", "description": "Merges duplicate ingredients by normalizing names and summing quantities where applicable.", "scope": "", "scopeKind": ""}, {"name": "addRecipeIngredientsToShoppingList(recipe)", "description": "Adds all ingredients from a recipe to the shopping list, merging duplicates.", "scope": "", "scopeKind": ""}], "calls": ["readStorage", "writeStorage", "crypto.randomUUID", "Date.prototype.toISOString"], "search-terms": ["shopping list", "ingredient parser", "local storage", "merge ingredients", "recipe ingredients"], "state": 2, "file_id": 33, "knowledge_revision": 145, "git_revision": "b2b1e2e245b0af7a0791d6287f8e272a0d37f7ac", "ctags": [{"_type": "tag", "name": "addRecipeIngredientsToShoppingList", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function addRecipeIngredientsToShoppingList(recipe) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipe)"}, {"_type": "tag", "name": "addShoppingItem", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function addShoppingItem({ name, quantity = '', unit = '', recipeId = null }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ name, quantity = '', unit = '', recipeId = null })"}, {"_type": "tag", "name": "addedAt", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    addedAt: new Date().toISOString(),$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "clearPurchased", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function clearPurchased() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getShoppingList", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function getShoppingList() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    id: crypto.randomUUID(),$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "item", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^  const item = {$/", "language": "JavaScript", "kind": "class", "scope": "addShoppingItem", "scopeKind": "class"}, {"_type": "tag", "name": "mergeIngredients", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function mergeIngredients(ings) {$/", "language": "JavaScript", "kind": "function", "signature": "(ings)"}, {"_type": "tag", "name": "name", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    name: String(name || '').trim(),$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "normalizeIngredientName", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function normalizeIngredientName(str) {$/", "language": "JavaScript", "kind": "function", "signature": "(str)"}, {"_type": "tag", "name": "parseIngredients", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function parseIngredients(raw) {$/", "language": "JavaScript", "kind": "function", "signature": "(raw)"}, {"_type": "tag", "name": "purchased", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    purchased: false,$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "quantity", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    quantity: String(quantity || ''),$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "recipeId", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    recipeId: recipeId ?? null,$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "removeShoppingItem", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function removeShoppingItem(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "setShoppingList", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function setShoppingList(items) {$/", "language": "JavaScript", "kind": "function", "signature": "(items)"}, {"_type": "tag", "name": "togglePurchased", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function togglePurchased(id) {$/", "language": "JavaScript", "kind": "function", "signature": "(id)"}, {"_type": "tag", "name": "unit", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^    unit: String(unit || ''),$/", "language": "JavaScript", "kind": "property", "scope": "addShoppingItem.item", "scopeKind": "class"}, {"_type": "tag", "name": "updateShoppingItem", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/shoppingList.js", "pattern": "/^export function updateShoppingItem(id, patch) {$/", "language": "JavaScript", "kind": "function", "signature": "(id, patch)"}], "hash": "f8afb5f8ed6de30a4d2e5120210eea6b", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/data/shoppingList.js", "fields": [{"name": "addedAt: new Date().toISOString(),", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}, {"name": "id: crypto.randomUUID(),", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}, {"name": "name: String(name || '').trim(),", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}, {"name": "purchased: false,", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}, {"name": "quantity: String(quantity || ''),", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}, {"name": "recipeId: recipeId ?? null,", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}, {"name": "unit: String(unit || ''),", "scope": "addShoppingItem.item", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"145": "b2b1e2e245b0af7a0791d6287f8e272a0d37f7ac"}]}