{"is_source_file": true, "format": "JavaScript", "description": "This file contains client-side functions for managing community features such as comments, likes, follows, user profiles, and sharing recipes. It uses localStorage for persistence and provides an API for other parts of the application to interact with community-related data.", "external_files": [], "external_methods": [], "published": ["getOrCreateCommunityUser", "setCommunityDisplayName", "getAllComments", "setAllComments", "getCommentsForRecipe", "addComment", "editMyComment", "deleteMyComment", "purgeCommentsForRecipe", "getLikesState", "setLikesState", "toggleLike", "isLikedByMe", "getLikeCount", "purgeLikesForRecipe", "getFollowsState", "setFollowsState", "toggleFollow", "isFollowing", "getFollowerCount", "discoverChefsFromRecipes", "getChefIdForRecipe", "getChefNameForRecipe", "shareRecipe", "getCommunityMetrics"], "classes": [], "methods": [{"name": "getOrCreateCommunityUser()", "description": "Returns the current user's profile, creating and persisting it if necessary, using localStorage.", "scope": "", "scopeKind": ""}, {"name": "setCommunityDisplayName(displayName)", "description": "Updates the display name of the current user in localStorage.", "scope": "", "scopeKind": ""}, {"name": "getAllComments()", "description": "Retrieves all comments stored in localStorage.", "scope": "", "scopeKind": ""}, {"name": "setAllComments(comments)", "description": "Persists the provided array of comments to localStorage.", "scope": "", "scopeKind": ""}, {"name": "getCommentsForRecipe(recipeId)", "description": "Fetches and sorts comments for a specific recipe ID.", "scope": "", "scopeKind": ""}, {"name": "addComment({ recipeId, text })", "description": "Adds a new comment for a recipe authored by the current user, returning updated comments.", "scope": "", "scopeKind": ""}, {"name": "editMyComment(commentId, newText)", "description": "Allows the current user to edit their own comment by comment ID.", "scope": "", "scopeKind": ""}, {"name": "deleteMyComment(commentId)", "description": "Deletes the current user's comment by comment ID.", "scope": "", "scopeKind": ""}, {"name": "purgeCommentsForRecipe(recipeId)", "description": "Removes all comments associated with a specific recipe ID.", "scope": "", "scopeKind": ""}, {"name": "getLikesState()", "description": "Retrieves the entire likes state object.", "scope": "", "scopeKind": ""}, {"name": "setLikesState(state)", "description": "Persists the entire likes state object.", "scope": "", "scopeKind": ""}, {"name": "toggleLike(recipeId)", "description": "Toggles the like status for the current user on a specific recipe, returning new liked state and count.", "scope": "", "scopeKind": ""}, {"name": "isLikedByMe(recipeId)", "description": "Checks if the current user has liked a specific recipe.", "scope": "", "scopeKind": ""}, {"name": "getLikeCount(recipeId)", "description": "Calculates total likes for a specific recipe across all users.", "scope": "", "scopeKind": ""}, {"name": "purgeLikesForRecipe(recipeId)", "description": "Removes all like entries for a specific recipe.", "scope": "", "scopeKind": ""}, {"name": "getFollowsState()", "description": "Retrieves the follows data structure from localStorage.", "scope": "", "scopeKind": ""}, {"name": "setFollowsState(state)", "description": "Saves the follows data structure to localStorage.", "scope": "", "scopeKind": ""}, {"name": "toggleFollow(chefId)", "description": "Follows or unfollows a specific chef for the current user.", "scope": "", "scopeKind": ""}, {"name": "isFollowing(chefId)", "description": "Checks if the current user is following a specific chef.", "scope": "", "scopeKind": ""}, {"name": "getFollowerCount(chefId)", "description": "Counts total followers for a specific chef.", "scope": "", "scopeKind": ""}, {"name": "discoverChefsFromRecipes(recipes)", "description": "Derives a list of chef objects from an array of recipes.", "scope": "", "scopeKind": ""}, {"name": "getChefIdForRecipe(recipe)", "description": "Returns a stable identifier for a chef based on recipe data.", "scope": "", "scopeKind": ""}, {"name": "getChefNameForRecipe(recipe)", "description": "Provides a display name for a chef based on recipe data.", "scope": "", "scopeKind": ""}, {"name": "shareRecipe({ title, text, url })", "description": "Invokes Web Share API or fallback to copy link and show toast.", "scope": "", "scopeKind": ""}, {"name": "getCommunityMetrics(recipes)", "description": "Computes overall community metrics like total comments, likes, top liked recipes, and most followed chefs.", "scope": "", "scopeKind": ""}, {"name": "capitalCase(s)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "dispatchToast({ title, body })", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "genUUID()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "isPlainObject(v)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["window.localStorage.getItem", "window.localStorage.setItem", "JSON.parse", "JSON.stringify", "dispatchToast", "navigator.share", "navigator.clipboard.writeText"], "search-terms": ["localStorage community data", "recipe comments", "likes management", "follows for chefs", "web share API", "community user profile"], "state": 2, "file_id": 43, "knowledge_revision": 170, "git_revision": "826b4e30e6e4db72579867154d8a9adf6b01873c", "ctags": [{"_type": "tag", "name": "COMMUNITY_KEYS", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export const COMMUNITY_KEYS = {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "addComment", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function addComment({ recipeId, text }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ recipeId, text })"}, {"_type": "tag", "name": "all", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  all[me.id] = { followingChefIds: next };$/", "language": "JavaScript", "kind": "class", "scope": "toggleFollow", "scopeKind": "class"}, {"_type": "tag", "name": "capitalCase", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^function capitalCase(s) { const str = String(s || '').replace(\\/[_-]+\\/g,' ').trim(); return str/", "language": "JavaScript", "kind": "function", "signature": "(s)"}, {"_type": "tag", "name": "comments", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  comments: 'app_comments:v1',$/", "language": "JavaScript", "kind": "property", "scope": "COMMUNITY_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "deleteMyComment", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function deleteMyComment(commentId) {$/", "language": "JavaScript", "kind": "function", "signature": "(commentId)"}, {"_type": "tag", "name": "discoverChefsFromRecipes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function discoverChefsFromRecipes(recipes) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipes)"}, {"_type": "tag", "name": "dispatchToast", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^function dispatchToast({ title, body }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, body })"}, {"_type": "tag", "name": "editMyComment", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function editMyComment(commentId, newText) {$/", "language": "JavaScript", "kind": "function", "signature": "(commentId, newText)"}, {"_type": "tag", "name": "followingChefIds", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  all[me.id] = { followingChefIds: next };$/", "language": "JavaScript", "kind": "property", "scope": "toggleFollow.all", "scopeKind": "class"}, {"_type": "tag", "name": "follows", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  follows: 'app_follows:v1',$/", "language": "JavaScript", "kind": "property", "scope": "COMMUNITY_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "genUUID", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^function genUUID() { return 'u-' + Math.random().toString(36).slice(2) + '-' + Date.now().toStri/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getAllComments", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getAllComments() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getChefIdForRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getChefIdForRecipe(recipe) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipe)"}, {"_type": "tag", "name": "getChefNameForRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getChefNameForRecipe(recipe) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipe)"}, {"_type": "tag", "name": "getCommentsForRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getCommentsForRecipe(recipeId) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeId)"}, {"_type": "tag", "name": "getCommunityMetrics", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getCommunityMetrics(recipes) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipes)"}, {"_type": "tag", "name": "getFollowerCount", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getFollowerCount(chefId) {$/", "language": "JavaScript", "kind": "function", "signature": "(chefId)"}, {"_type": "tag", "name": "getFollowsState", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^function getFollowsState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getLikeCount", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getLikeCount(recipeId) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeId)"}, {"_type": "tag", "name": "getLikesState", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getLikesState() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "getOrCreateCommunityUser", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function getOrCreateCommunityUser() {$/", "language": "JavaScript", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^    profile = { id, displayName: name || '' };$/", "language": "JavaScript", "kind": "field", "scope": "getOrCreateCommunityUser.profile", "scopeKind": "class"}, {"_type": "tag", "name": "isFollowing", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function isFollowing(chefId) {$/", "language": "JavaScript", "kind": "function", "signature": "(chefId)"}, {"_type": "tag", "name": "isLikedByMe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function isLikedByMe(recipeId) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeId)"}, {"_type": "tag", "name": "isPlainObject", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^function isPlainObject(v) { return v && typeof v === 'object' && !Array.isArray(v); }$/", "language": "JavaScript", "kind": "function", "signature": "(v)"}, {"_type": "tag", "name": "likes", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  likes: 'app_likes:v1',$/", "language": "JavaScript", "kind": "property", "scope": "COMMUNITY_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "purgeCommentsForRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function purgeCommentsForRecipe(recipeId) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeId)"}, {"_type": "tag", "name": "purgeLikesForRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function purgeLikesForRecipe(recipeId) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeId)"}, {"_type": "tag", "name": "setAllComments", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function setAllComments(comments) {$/", "language": "JavaScript", "kind": "function", "signature": "(comments)"}, {"_type": "tag", "name": "setCommunityDisplayName", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function setCommunityDisplayName(displayName) {$/", "language": "JavaScript", "kind": "function", "signature": "(displayName)"}, {"_type": "tag", "name": "setFollowsState", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^function setFollowsState(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "setLikesState", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function setLikesState(state) {$/", "language": "JavaScript", "kind": "function", "signature": "(state)"}, {"_type": "tag", "name": "shareRecipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export async function shareRecipe({ title, text, url }) {$/", "language": "JavaScript", "kind": "function", "signature": "({ title, text, url })"}, {"_type": "tag", "name": "toggleFollow", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function toggleFollow(chefId) {$/", "language": "JavaScript", "kind": "function", "signature": "(chefId)"}, {"_type": "tag", "name": "toggleLike", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^export function toggleLike(recipeId) {$/", "language": "JavaScript", "kind": "function", "signature": "(recipeId)"}, {"_type": "tag", "name": "userId", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  userId: 'app_user_id:v2',          \\/\\/ align with reviews if present but namespaced$/", "language": "JavaScript", "kind": "property", "scope": "COMMUNITY_KEYS", "scopeKind": "class"}, {"_type": "tag", "name": "userProfile", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/data/community.js", "pattern": "/^  userProfile: 'app_user_profile:v1', \\/\\/ { id, displayName }$/", "language": "JavaScript", "kind": "property", "scope": "COMMUNITY_KEYS", "scopeKind": "class"}], "hash": "a8482c10569287615ab0085be19ca0de", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/data/community.js", "fields": [{"name": "comments: 'app_comments:v1',", "scope": "COMMUNITY_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "all[me.id] = { followingChefIds: next };", "scope": "toggleFollow.all", "scopeKind": "class", "description": "unavailable"}, {"name": "follows: 'app_follows:v1',", "scope": "COMMUNITY_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "profile = { id, displayName: name || '' };", "scope": "getOrCreateCommunityUser.profile", "scopeKind": "class", "description": "unavailable"}, {"name": "likes: 'app_likes:v1',", "scope": "COMMUNITY_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "userId: 'app_user_id:v2',          \\/\\/ align with reviews if present but namespaced", "scope": "COMMUNITY_KEYS", "scopeKind": "class", "description": "unavailable"}, {"name": "userProfile: 'app_user_profile:v1', \\/\\/ { id, displayName }", "scope": "COMMUNITY_KEYS", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"170": "826b4e30e6e4db72579867154d8a9adf6b01873c"}]}