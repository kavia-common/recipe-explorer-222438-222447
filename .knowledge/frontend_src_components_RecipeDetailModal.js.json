{"is_source_file": true, "format": "JavaScript (React component)", "description": "React component RecipeDetailModal renders detailed recipe information with multilingual support, reviews, comments, and user interactions.", "external_files": ["../data/reviews", "../data/community", "../data/i18n"], "external_methods": ["getOrCreateUser", "getReviewsForRecipe", "getRatingSummary", "upsertMyReview", "deleteMyReview", "addComment", "deleteMyComment", "editMyComment", "getCommentsForRecipe", "getOrCreateCommunityUser", "getChefIdForRecipe", "getChefNameForRecipe", "getFollowerCount", "getLikeCount", "isFollowing", "isLikedByMe", "shareRecipe", "toggleFollow", "toggleLike", "getSelectedLanguage", "translateRecipe", "tUI", "recordTranslatedView"], "published": ["RecipeDetailModal"], "classes": [], "methods": [{"name": "submitReview", "description": "Handles review submission, validation, and updating state."}, {"name": "removeReview", "description": "Deletes the user's review for the recipe."}, {"name": "StarInput", "description": "A subcomponent for selecting star ratings."}, {"name": "onEsc(e)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["getSelectedLanguage", "setLang", "recordTranslatedView", "getReviewsForRecipe", "getRatingSummary", "upsertMyReview", "deleteMyReview", "getLikeCount", "isLikedByMe", "getCommentsForRecipe", "getFollowerCount", "getChefIdForRecipe", "getChefNameForRecipe", "isFollowing", "toggleFollow", "toggleLike", "translateRecipe", "shareRecipe", "onClose", "onEdit", "onDelete", "setReviews", "setShowCount", "setCommentText", "setRatingInput", "setCommentInput", "setError"], "search-terms": ["RecipeDetailModal", "reviews", "community", "i18n", "multilingual", "comments", "reviews", "user interactions", "recipe details"], "state": 2, "file_id": 16, "knowledge_revision": 179, "git_revision": "8a4c36cc748b35850d2eac742fc242689587d79e", "revision_history": [{"42": "4a5274f5e8ef618d36ae8ec64ffa21cc7dc3c923"}, {"52": "2eeb12eb9177c67c1841492adcce62cded53521b"}, {"58": "b59e9f8514ec0eb618f9494051449797b791bf9c"}, {"68": "ba3b7178b628a39c6fe53cd507f94708b6da41cb"}, {"81": "e912658c2e163e51b30f019a9aa54501d26c46de"}, {"85": "e912658c2e163e51b30f019a9aa54501d26c46de"}, {"110": "4c3b3369fda8cc69e616a9a60540fcd3129911a8"}, {"122": "4c3b3369fda8cc69e616a9a60540fcd3129911a8"}, {"128": "ae1604b49c5a8b0547f061120a01b9e10f1f8be3"}, {"131": "ae1604b49c5a8b0547f061120a01b9e10f1f8be3"}, {"141": "b2b1e2e245b0af7a0791d6287f8e272a0d37f7ac"}, {"164": "b2b1e2e245b0af7a0791d6287f8e272a0d37f7ac"}, {"179": "8a4c36cc748b35850d2eac742fc242689587d79e"}], "ctags": [{"_type": "tag", "name": "1000", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^                  maxLength={1000}$/", "language": "JavaScript", "kind": "field", "scope": "maxLength", "scopeKind": "class"}, {"_type": "tag", "name": "1000", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^                maxLength={1000}$/", "language": "JavaScript", "kind": "field", "scope": "maxLength", "scopeKind": "class"}, {"_type": "tag", "name": "RecipeDetailModal", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^const RecipeDetailModal = ({$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "StarInput", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const StarInput = ({ value, onChange }) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "active", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const active = showOriginal || lang === 'en' ? recipe : (translated || recipe);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "chefId", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const chefId = useMemo(() => (recipe ? getChefIdForRecipe(recipe) : ''), [recipe]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "chefName", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const chefName = useMemo(() => (recipe ? getChefNameForRecipe(recipe) : ''), [recipe]);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "commentInput", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^                  value={commentInput}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "commentText", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^                value={commentText}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "fav", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              aria-label={fav ? 'Remove from favorites' : 'Add to favorites'}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "fav", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              title={fav ? 'Remove from favorites' : 'Add to favorites'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "fav", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const fav = recipe ? isFavorite(recipe.id) : false;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "following", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              aria-label={following ? 'Unfollow chef' : 'Follow chef'}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "following", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              aria-pressed={following}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "following", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              title={following ? 'Following' : 'Follow'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "lang", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              value={lang}$/", "language": "JavaScript", "kind": "field", "scope": "value", "scopeKind": "class"}, {"_type": "tag", "name": "liked", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              aria-label={liked ? 'Unlike recipe' : 'Like recipe'}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "liked", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              aria-pressed={liked}$/", "language": "JavaScript", "kind": "field", "scope": "aria", "scopeKind": "class"}, {"_type": "tag", "name": "liked", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              title={liked ? 'Unlike' : 'Like'}$/", "language": "JavaScript", "kind": "field", "scope": "title", "scopeKind": "class"}, {"_type": "tag", "name": "me", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const me = getOrCreateUser();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "myReview", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const myReview = useMemo(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "n", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^    const n = Number(ratingInput);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              const next = addComment({ recipeId: recipe.id, text });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^    const next = deleteMyReview(recipe.id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^    const next = upsertMyReview({ recipeId: recipe.id, rating: n, comment: commentInput });$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "now", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              onClick={() => { const now = toggleFollow(chefId); setFollowing(now); setFollowers/", "language": "JavaScript", "kind": "constant", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "onEsc", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^    function onEsc(e) { if (e.key === 'Escape') onClose(); }$/", "language": "JavaScript", "kind": "function", "signature": "(e)"}, {"_type": "tag", "name": "rec", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const rec = recipe || {};$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^            alt={recipe.title || 'Recipe image'}$/", "language": "JavaScript", "kind": "field", "scope": "alt", "scopeKind": "class"}, {"_type": "tag", "name": "recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^            src={recipe.image || `https:\\/\\/source.unsplash.com\\/featured\\/800x400?recipe,food&s/", "language": "JavaScript", "kind": "field", "scope": "src", "scopeKind": "class"}, {"_type": "tag", "name": "recipe", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  recipe,$/", "language": "JavaScript", "kind": "field", "scope": "RecipeDetailModal", "scopeKind": "class"}, {"_type": "tag", "name": "recipeId", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const recipeId = rec.id;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "removeReview", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const removeReview = () => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setCommentInput", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [commentInput, setCommentInput] = useState(myReview?.comment || '');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setCommentText", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [commentText, setCommentText] = useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setComments", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [comments, setComments] = useState(() => (recipe ? getCommentsForRecipe(recipe.id) : [])/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setCommentsShow", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [commentsShow, setCommentsShow] = useState(5);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setError", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [error, setError] = useState('');$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setFollowers", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [followers, setFollowers] = useState(() => (chefId ? getFollowerCount(chefId) : 0));$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setFollowing", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [following, setFollowing] = useState(() => (chefId ? isFollowing(chefId) : false));$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLang", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [lang, setLang] = useState(getSelectedLanguage());$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLikeCount", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [likeCount, setLikeCount] = useState(() => (recipe ? getLikeCount(recipe.id) : 0));$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setLiked", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [liked, setLiked] = useState(() => (recipe ? isLikedByMe(recipe.id) : false));$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setRatingInput", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [ratingInput, setRatingInput] = useState(myReview?.rating || 0);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setReviews", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [reviews, setReviews] = useState(() => (recipe ? getReviewsForRecipe(recipe.id) : []));$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShowCount", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [showCount, setShowCount] = useState(5);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "setShowOriginal", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const [showOriginal, setShowOriginal] = useState(false);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "stars", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^    const stars = [1,2,3,4,5];$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "submitReview", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const submitReview = (e) => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "summary", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const summary = useMemo(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^              const text = String(commentText || '').trim();$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "translated", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const translated = useMemo(() => {$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "url", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^                const url = `${window.location.origin}${window.location.pathname}#\\/?id=${encode/", "language": "JavaScript", "kind": "constant", "scope": "onClick", "scopeKind": "class"}, {"_type": "tag", "name": "value", "path": "/home/kavia/workspace/code-generation/recipe-explorer-222438-222447/frontend/src/components/RecipeDetailModal.js", "pattern": "/^  const StarInput = ({ value, onChange }) => {$/", "language": "JavaScript", "kind": "field", "scope": "StarInput", "scopeKind": "class"}], "hash": "f7bf6a787f65ddeecf94e7f5da2721ea", "format-version": 4, "code-base-name": "frontend", "filename": "frontend/src/components/RecipeDetailModal.js", "fields": [{"name": "maxLength={1000}", "scope": "maxLength", "scopeKind": "class", "description": "unavailable"}, {"name": "value={commentInput}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "value={commentText}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={fav ? 'Remove from favorites' : 'Add to favorites'}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={fav ? 'Remove from favorites' : 'Add to favorites'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={following ? 'Unfollow chef' : 'Follow chef'}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={following}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={following ? 'Following' : 'Follow'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "value={lang}", "scope": "value", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-label={liked ? 'Unlike recipe' : 'Like recipe'}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "aria-pressed={liked}", "scope": "aria", "scopeKind": "class", "description": "unavailable"}, {"name": "title={liked ? 'Unlike' : 'Like'}", "scope": "title", "scopeKind": "class", "description": "unavailable"}, {"name": "alt={recipe.title || 'Recipe image'}", "scope": "alt", "scopeKind": "class", "description": "unavailable"}, {"name": "src={recipe.image || `https:\\/\\/source.unsplash.com\\/featured\\/800x400?recipe,food&s/", "scope": "src", "scopeKind": "class", "description": "unavailable"}, {"name": "recipe,", "scope": "RecipeDetailModal", "scopeKind": "class", "description": "unavailable"}, {"name": "const StarInput = ({ value, onChange }) => {", "scope": "StarInput", "scopeKind": "class", "description": "unavailable"}]}